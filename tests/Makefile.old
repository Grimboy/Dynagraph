.SUFFIXES  : .incr .incrout

DYNAGRAPH=../dynagraph

SUF_SUPER=super
AT_SUPER=-a superengines=shapegen
SUF_INTER=imed
AT_INTER=-a intermediate=true
SUF_EFLOW=eflow
AT_EFLOW=-a emphasizeflow=true

run: *.incr

*.incr: always
	-$(DYNAGRAPH) < $@ > $*.incrout
	-$(DYNAGRAPH) $(AT_SUPER) < $@ > $*.$(SUF_SUPER).incrout
	-$(DYNAGRAPH) $(AT_INTER) < $@ > $*.$(SUF_INTER).incrout
	-$(DYNAGRAPH) $(AT_EFLOW) < $@ > $*.$(SUF_EFLOW).incrout
	-$(DYNAGRAPH) $(AT_SUPER) $(AT_INTER) < $@ > $*.$(SUF_SUPER).$(SUF_INTER).incrout
	-$(DYNAGRAPH) $(AT_SUPER) $(AT_EFLOW) < $@ > $*.$(SUF_SUPER).$(SUF_EFLOW).incrout
	-$(DYNAGRAPH) $(AT_INTER) $(AT_EFLOW) < $@ > $*.$(SUF_INTER).$(SUF_EFLOW).incrout
	-$(DYNAGRAPH) $(AT_SUPER) $(AT_INTER) $(AT_EFLOW) < $@ > $*.$(SUF_SUPER).$(SUF_INTER).$(SUF_EFLOW).incrout

always: 

clean:
	rm -f *.incrout
